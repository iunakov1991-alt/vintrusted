<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç VIN Check USA</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #2563eb;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px;
            font-size: 16px;
        }
        .test-button:hover {
            background: #1d4ed8;
        }
        .test-result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            background: #f8fafc;
            border-left: 4px solid #2563eb;
        }
        .error {
            border-left-color: #ef4444;
            background: #fef2f2;
        }
        .success {
            border-left-color: #10b981;
            background: #f0fdf4;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ –¢–µ—Å—Ç VIN Check USA</h1>
        <p>–≠—Ç–æ—Ç —Ñ–∞–π–ª –ø–æ–º–æ–∂–µ—Ç –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–∞–π—Ç–∞ –±–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞.</p>
        
        <h2>–¢–µ—Å—Ç–æ–≤—ã–µ VIN –Ω–æ–º–µ—Ä–∞:</h2>
        <ul>
            <li><strong>1HGBH41JXMN109186</strong> - Honda Civic 2021 (—á–∏—Å—Ç–∞—è –∏—Å—Ç–æ—Ä–∏—è)</li>
            <li><strong>1FTFW1ET5DFC12345</strong> - Ford F-150 2019 (—Å –∞–≤–∞—Ä–∏—è–º–∏)</li>
            <li><strong>1J4GZ58S6VC123456</strong> - Jeep Grand Cherokee (–æ–±—â–∏–π —Å–ª—É—á–∞–π)</li>
        </ul>

        <h2>–ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã:</h2>
        <button class="test-button" onclick="testVINValidation()">–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ VIN</button>
        <button class="test-button" onclick="testMockData()">–¢–µ—Å—Ç –º–æ–∫ –¥–∞–Ω–Ω—ã—Ö</button>
        <button class="test-button" onclick="testUI()">–¢–µ—Å—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</button>
        <button class="test-button" onclick="openMainSite()">–û—Ç–∫—Ä—ã—Ç—å –≥–ª–∞–≤–Ω—ã–π —Å–∞–π—Ç</button>
        
        <div id="testResult" class="test-result" style="display: none;"></div>
    </div>

    <script>
        function testVINValidation() {
            const testVINs = [
                '1HGBH41JXMN109186', // –í–∞–ª–∏–¥–Ω—ã–π
                '1FTFW1ET5DFC12345', // –í–∞–ª–∏–¥–Ω—ã–π
                '12345678901234567', // –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π (—Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã)
                'ABCDEFGHIJKLMNOPQ', // –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π (—Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã)
                '1HGBH41JXMN10918',  // –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π (16 —Å–∏–º–≤–æ–ª–æ–≤)
                '1HGBH41JXMN1091867', // –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π (18 —Å–∏–º–≤–æ–ª–æ–≤)
                '1HGBH41JXMN10918I',  // –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π (—Å–æ–¥–µ—Ä–∂–∏—Ç I)
            ];

            let results = '<h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ VIN:</h3>';
            
            testVINs.forEach(vin => {
                const isValid = validateVIN(vin);
                const status = isValid ? '‚úÖ –í–∞–ª–∏–¥–Ω—ã–π' : '‚ùå –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π';
                results += `<p><strong>${vin}</strong>: ${status}</p>`;
            });

            showResult(results, 'success');
        }

        function testMockData() {
            const testVIN = '1HGBH41JXMN109186';
            const mockData = getMockReportData(testVIN);
            
            let results = '<h3>–¢–µ—Å—Ç –º–æ–∫ –¥–∞–Ω–Ω—ã—Ö:</h3>';
            results += `<p><strong>VIN:</strong> ${mockData.data.vin}</p>`;
            results += `<p><strong>–ê–≤—Ç–æ–º–æ–±–∏–ª—å:</strong> ${mockData.data.year} ${mockData.data.make} ${mockData.data.model}</p>`;
            results += `<p><strong>–î–≤–∏–≥–∞—Ç–µ–ª—å:</strong> ${mockData.data.engine}</p>`;
            results += `<p><strong>–ê–≤–∞—Ä–∏–∏:</strong> ${mockData.data.accidents}</p>`;
            results += `<p><strong>–í–ª–∞–¥–µ–ª—å—Ü—ã:</strong> ${mockData.data.owners}</p>`;
            results += `<p><strong>–ü—Ä–æ–±–µ–≥:</strong> ${mockData.data.mileage.toLocaleString()} –º–∏–ª—å</p>`;
            results += `<p><strong>–°—Ç–æ–∏–º–æ—Å—Ç—å:</strong> $${mockData.data.marketValue.toLocaleString()}</p>`;

            showResult(results, 'success');
        }

        function testUI() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            const elements = [
                { name: '–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞', file: 'index.html' },
                { name: '–°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç—á–µ—Ç–∞', file: 'report.html' },
                { name: '–û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏', file: 'styles.css' },
                { name: '–°—Ç–∏–ª–∏ –æ—Ç—á–µ—Ç–∞', file: 'report.css' },
                { name: '–û—Å–Ω–æ–≤–Ω–æ–π JavaScript', file: 'script.js' },
                { name: 'JavaScript –æ—Ç—á–µ—Ç–∞', file: 'report.js' },
                { name: '–°–µ—Ä–≤–µ—Ä', file: 'server.js' },
                { name: '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏', file: 'package.json' }
            ];

            let results = '<h3>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤:</h3>';
            
            elements.forEach(element => {
                // –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ fetch
                fetch(element.file)
                    .then(response => {
                        const status = response.ok ? '‚úÖ –ù–∞–π–¥–µ–Ω' : '‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω';
                        results += `<p><strong>${element.name}:</strong> ${status}</p>`;
                        updateResult();
                    })
                    .catch(() => {
                        results += `<p><strong>${element.name}:</strong> ‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</p>`;
                        updateResult();
                    });
            });

            function updateResult() {
                document.getElementById('testResult').innerHTML = results;
                document.getElementById('testResult').style.display = 'block';
            }

            showResult(results, 'success');
        }

        function openMainSite() {
            window.open('index.html', '_blank');
        }

        function showResult(content, type = 'success') {
            const resultDiv = document.getElementById('testResult');
            resultDiv.innerHTML = content;
            resultDiv.className = `test-result ${type}`;
            resultDiv.style.display = 'block';
        }

        // –§—É–Ω–∫—Ü–∏–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ VIN (–∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞)
        function validateVIN(vin) {
            if (!vin || vin.length !== 17) return false;
            
            const invalidChars = /[IOQ]/;
            if (invalidChars.test(vin)) return false;
            
            return validateVINChecksum(vin);
        }

        function validateVINChecksum(vin) {
            const weights = [8, 7, 6, 5, 4, 3, 2, 10, 0, 9, 8, 7, 6, 5, 4, 3, 2];
            const transliteration = {
                'A': 1, 'B': 2, 'C': 3, 'D': 4, 'E': 5, 'F': 6, 'G': 7, 'H': 8,
                'J': 1, 'K': 2, 'L': 3, 'M': 4, 'N': 5, 'P': 7, 'R': 9,
                'S': 2, 'T': 3, 'U': 4, 'V': 5, 'W': 6, 'X': 7, 'Y': 8, 'Z': 9
            };
            
            let sum = 0;
            
            for (let i = 0; i < 17; i++) {
                let value;
                const char = vin[i];
                
                if (char >= '0' && char <= '9') {
                    value = parseInt(char);
                } else if (transliteration[char]) {
                    value = transliteration[char];
                } else {
                    return false;
                }
                
                sum += value * weights[i];
            }
            
            const checkDigit = sum % 11;
            const expectedCheckDigit = vin[8];
            
            if (checkDigit === 10) {
                return expectedCheckDigit === 'X';
            } else {
                return expectedCheckDigit === checkDigit.toString();
            }
        }

        // –ú–æ–∫ –¥–∞–Ω–Ω—ã–µ (–∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞)
        function getMockReportData(vin) {
            const mockReports = {
                '1HGBH41JXMN109186': {
                    success: true,
                    data: {
                        vin: vin,
                        make: 'Honda',
                        model: 'Civic',
                        year: 2021,
                        engine: '1.5L 4-Cylinder',
                        transmission: 'CVT',
                        accidents: 0,
                        owners: 1,
                        mileage: 45000,
                        liens: false,
                        recalls: 0,
                        marketValue: 25000
                    }
                },
                '1FTFW1ET5DFC12345': {
                    success: true,
                    data: {
                        vin: vin,
                        make: 'Ford',
                        model: 'F-150',
                        year: 2019,
                        engine: '3.5L V6',
                        transmission: 'Automatic',
                        accidents: 1,
                        owners: 2,
                        mileage: 78000,
                        liens: true,
                        recalls: 2,
                        marketValue: 35000
                    }
                }
            };
            
            return mockReports[vin] || {
                success: true,
                data: {
                    vin: vin,
                    make: 'Toyota',
                    model: 'Camry',
                    year: 2020,
                    engine: '2.5L 4-Cylinder',
                    transmission: 'Automatic',
                    accidents: 0,
                    owners: 1,
                    mileage: 32000,
                    liens: false,
                    recalls: 1,
                    marketValue: 28000
                }
            };
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            console.log('üß™ –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            console.log('üìÅ –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ–∞–π–ª—ã:', [
                'index.html', 'report.html', 'styles.css', 'report.css',
                'script.js', 'report.js', 'server.js', 'package.json'
            ]);
        });
    </script>
</body>
</html>
